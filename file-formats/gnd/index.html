<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-file-formats/GND">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<title data-rh="true">GND Format Specification | Ragnarok Research Lab</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ragnarokresearchlab.github.io/file-formats/gnd/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="GND Format Specification | Ragnarok Research Lab"><meta data-rh="true" name="description" content="This document describes the GND file format used in the Ragnarok Online client."><meta data-rh="true" property="og:description" content="This document describes the GND file format used in the Ragnarok Online client."><link data-rh="true" rel="icon" href="/img/favicon-with-transparency.png"><link data-rh="true" rel="canonical" href="https://ragnarokresearchlab.github.io/file-formats/gnd/"><link data-rh="true" rel="alternate" href="https://ragnarokresearchlab.github.io/file-formats/gnd/" hreflang="en"><link data-rh="true" rel="alternate" href="https://ragnarokresearchlab.github.io/file-formats/gnd/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.aa062550.css">
<link rel="preload" href="/assets/js/runtime~main.4ac04102.js" as="script">
<link rel="preload" href="/assets/js/main.92fc20c7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-with-more-space-around.png" alt="Ragnarok Research Lab Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo-with-more-space-around.png" alt="Ragnarok Research Lab Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Ragnarok Research Lab</b></a><a class="navbar__item navbar__link" href="/about/">About</a><a class="navbar__item navbar__link" href="/file-formats/">File Formats</a><a class="navbar__item navbar__link" href="/rendering/">Rendering</a><a class="navbar__item navbar__link" href="/game-mechanics/">Game Mechanics</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/contributing/">Contribute</a><a href="https://discord.gg/7RFdMNrySy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/RagnarokResearchLab" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/about/">About</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contributing/">Contributing</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/file-formats/">File Formats</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/rsw/">RSW (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/act/">ACT (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/ebm/">EBM (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/ezv/">EZV (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/gat/">GAT Format Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/file-formats/gnd/">GND Format Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/gr2/">GR2 Format Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/grf/">GRF Format Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/imf/">IMF (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/ini/">INI (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/lub/">LUB (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/pal/">PAL (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/RGZ/">RGZ (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/rma/">RMA (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/rsa/">RSA (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/rsm/">RSM (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/rsx/">RSX (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/scr/">SCR (Placeholder)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/spr/">SPR Format Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/file-formats/str/">STR (Placeholder)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rendering/">Rendering</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/game-mechanics/">Game Mechanics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/arcturus/">Arcturus</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/community-projects/">Community Projects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/glossary/">Glossary</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">üè†</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">File Formats</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">GND Format Specification</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>GND Format Specification</h1></header><p>This document describes the GND file format used in the Ragnarok Online client.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="contents">Contents<a class="hash-link" href="#contents" title="Direct link to heading">‚Äã</a></h2><p>GND files contain the following information:</p><ul><li>The entirety of a map&#x27;s surface geometry (i.e., the ground/static terrain)</li><li>A list of diffuse textures and texture coordinates for mapping them to the terrain</li><li>Vertex colors and precomputed lightmap textures to add lights and shadows</li><li>In later versions they can also include the configuration of the water surfaces, which were previously stored in RSW files</li></ul><p>The file contents effectively represent the basic terrain for a given map, without 3D models, sprites, or other decoration.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="layout">Layout<a class="hash-link" href="#layout" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="arcturus--iro-alpha">Arcturus &amp; iRO Alpha<a class="hash-link" href="#arcturus--iro-alpha" title="Direct link to heading">‚Äã</a></h3><p>Unversioned GND files were already used in <a href="/arcturus/">Arcturus</a>. They also appear in the iRO alpha client, alongside more recent versions.</p><table><thead><tr><th align="center">Field</th><th align="center">Offset</th><th align="center">Length</th><th align="center">Type</th><th align="center">Description</th></tr></thead><tbody><tr><td align="center"><code>TextureCount</code></td><td align="center">0</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Number of diffuse texture paths</td></tr><tr><td align="center"><code>Width</code></td><td align="center">4</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Width of the cube grid</td></tr><tr><td align="center"><code>Height</code></td><td align="center">8</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Height of the cube grid</td></tr><tr><td align="center"><code>TexturePaths</code></td><td align="center">12</td><td align="center">80</td><td align="center"><code>array</code></td><td align="center"><code>TextureCount</code> entries; all paths are null-terminated C strings</td></tr><tr><td align="center"><code>GroundMeshCubes</code></td><td align="center">variable</td><td align="center">28</td><td align="center"><code>array</code></td><td align="center"><code>Width</code> <!-- -->*<!-- --> <code>Height</code> entries</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mojV" id="cube-grid">Cube Grid<a class="hash-link" href="#cube-grid" title="Direct link to heading">‚Äã</a></h4><p>Compared to later versions of the format, the indirection from cubes to textured surfaces doesn&#x27;t yet exist:</p><table><thead><tr><th align="center">Field</th><th align="center">Offset</th><th align="center">Length</th><th align="center">Type</th><th align="center">Description</th></tr></thead><tbody><tr><td align="center"><code>UpwardsFacingTexture</code></td><td align="center">0</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Texture ID of the upwards-facing <code>GROUND</code> surface</td></tr><tr><td align="center"><code>NorthernWallTexture</code></td><td align="center">4</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Texture ID of the northwards-facing <code>WALL</code> surface</td></tr><tr><td align="center"><code>EasternWallTexture</code></td><td align="center">8</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Texture ID of the eastwards-facing <code>WALL</code> surface</td></tr><tr><td align="center"><code>BottomLeftHeight</code></td><td align="center">12</td><td align="center">4</td><td align="center"><code>float</code></td><td align="center">Altitude of the bottom left corner (in world units)</td></tr><tr><td align="center"><code>BottomRightHeight</code></td><td align="center">16</td><td align="center">4</td><td align="center"><code>float</code></td><td align="center">Altitude of the bottom right corner (in world units)</td></tr><tr><td align="center"><code>TopLeftHeight</code></td><td align="center">20</td><td align="center">4</td><td align="center"><code>float</code></td><td align="center">Altitude of the top left corner (in world units)</td></tr><tr><td align="center"><code>TopRightHeight</code></td><td align="center">24</td><td align="center">4</td><td align="center"><code>float</code></td><td align="center">Altitude of the top right corner (in world units)</td></tr><tr><td align="center"><code>VertexColor</code></td><td align="center">28</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">ARGB vertex color (stored as BGRA) for the bottom left vertex</td></tr><tr><td align="center">TBD</td><td align="center">32</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Purpose unknown, but its value seems to always be <code>1</code> (?)</td></tr><tr><td align="center"><code>TextureCoordinates</code></td><td align="center">36</td><td align="center">32</td><td align="center"><code>float</code></td><td align="center">Diffuse texture UVs (uses the same format as later versions)</td></tr></tbody></table><p>The format used to store texture coordinates seems to be identical to <a href="#texture-coordinates">the one used in GND 1.7 and later</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="version-15">Version 1.5<a class="hash-link" href="#version-15" title="Direct link to heading">‚Äã</a></h3><p>Certain maps in the iRO alpha client use GND 1.5. These are much closer to the version used in the modern RO client.</p><p>The format is identical to GND 1.7, except that the lightmap format is stored globally instead of on a per-slice basis:</p><ul><li><code>PixelFormat</code>, <code>Width</code>, and <code>Height</code> appear directly after the <code>LightmapSliceCount</code> fields in the main structure</li><li>Each individual <code>LightmapSlices</code> entry only carries the pixel data (as defined by the above format)</li><li>For more details, see <a href="https://github.com/flaviojs/eathena-devel-FlavioJS/blob/master/client/file_formats/gnd.txt" target="_blank" rel="noopener noreferrer">https://github.com/flaviojs/eathena-devel-FlavioJS/blob/master/client/file_formats/gnd.txt</a></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="version-16">Version 1.6<a class="hash-link" href="#version-16" title="Direct link to heading">‚Äã</a></h3><p><a href="https://github.com/flaviojs/eathena-devel-FlavioJS/blob/master/client/file_formats/gnd.txt" target="_blank" rel="noopener noreferrer">Some unverified information is available for this version</a>, but there aren&#x27;t any known files that actually use it.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="version-17">Version 1.7<a class="hash-link" href="#version-17" title="Direct link to heading">‚Äã</a></h3><p>This is the original version used for most maps in the modern RO client:</p><table><thead><tr><th align="center">Field</th><th align="center">Offset</th><th align="center">Length</th><th align="center">Type</th><th align="center">Description</th></tr></thead><tbody><tr><td align="center"><code>Header</code></td><td align="center">0</td><td align="center">4</td><td align="center"><code>string</code></td><td align="center"><code>&quot;GRGN&quot;</code> as an ASCII-encoded, fixed-size string</td></tr><tr><td align="center"><code>MajorVersion</code></td><td align="center">4</td><td align="center">1</td><td align="center"><code>byte</code></td><td align="center">Versioning information</td></tr><tr><td align="center"><code>MinorVersion</code></td><td align="center">5</td><td align="center">1</td><td align="center"><code>byte</code></td><td align="center">Versioning information</td></tr><tr><td align="center"><code>Width</code></td><td align="center">6</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Width of the cube grid</td></tr><tr><td align="center"><code>Height</code></td><td align="center">10</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Height of the cube grid</td></tr><tr><td align="center"><code>Scale</code></td><td align="center">14</td><td align="center">4</td><td align="center"><code>float</code></td><td align="center">Geometry scale factor (always <code>10</code>)</td></tr><tr><td align="center"><code>TextureCount</code></td><td align="center">16</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Number of diffuse texture paths</td></tr><tr><td align="center"><code>TexturePathLength</code></td><td align="center">20</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Length of each texture path string, in bytes (always <code>80</code>)</td></tr><tr><td align="center"><code>TexturePaths</code></td><td align="center">24+</td><td align="center">80</td><td align="center"><code>string</code></td><td align="center">Null-terminated (discard garbage bytes at the end)</td></tr><tr><td align="center"><code>LightmapSliceCount</code></td><td align="center">variable</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Number of lightmap (and ambient occlusion) texture slices</td></tr><tr><td align="center"><code>LightmapSlices</code></td><td align="center">variable</td><td align="center">268</td><td align="center"><code>struct</code></td><td align="center">Ambient occlusion and lightmap texture bitmaps (alternating)</td></tr><tr><td align="center"><code>SurfaceCount</code></td><td align="center">variable</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Number of textured surface blueprints</td></tr><tr><td align="center"><code>SurfaceDefinitions</code></td><td align="center">variable</td><td align="center">56</td><td align="center"><code>array</code></td><td align="center">Shared texturing information (copy to each cube vertex)</td></tr><tr><td align="center"><code>GroundMeshCubes</code></td><td align="center">variable</td><td align="center">28</td><td align="center"><code>array</code></td><td align="center"><code>Width</code> <!-- -->*<!-- --> <code>Height</code> entries</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mojV" id="lightmap-slices">Lightmap Slices<a class="hash-link" href="#lightmap-slices" title="Direct link to heading">‚Äã</a></h4><p>The lightmap and ambient occlusion textures are split into small bitmaps:</p><table><thead><tr><th align="center">Field</th><th align="center">Offset</th><th align="center">Length</th><th align="center">Type</th><th align="center">Description and notes</th></tr></thead><tbody><tr><td align="center"><code>PixelFormat</code></td><td align="center">4</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Encoding of the lightmap and ambient occlusion pixels (usually <code>1</code><sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>)</td></tr><tr><td align="center"><code>Width</code></td><td align="center">8</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Width of each texture bitmap (always <code>8</code>)</td></tr><tr><td align="center"><code>Height</code></td><td align="center">12</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Height of teach texture bitmap (always <code>8</code>)</td></tr><tr><td align="center"><code>ShadowmapPixels</code></td><td align="center">16</td><td align="center">64</td><td align="center"><code>array</code></td><td align="center"><code>Width * Height</code> ambient occlusion texture pixels (intensity values)</td></tr><tr><td align="center"><code>LightmapPixels</code></td><td align="center">16</td><td align="center">192</td><td align="center"><code>array</code></td><td align="center"><code>Width * Height</code> lightmap texture pixels (specularity values)</td></tr></tbody></table><p><sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup> <em>This value appears to be ignored; the actual pixel format should always be 8-bit RGBA (stored as ARGB).</em></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="textured-surfaces">Textured Surfaces<a class="hash-link" href="#textured-surfaces" title="Direct link to heading">‚Äã</a></h4><p>These can be used to construct the terrain geometry (vertex data):</p><table><thead><tr><th align="center">Field</th><th align="center">Offset</th><th align="center">Length</th><th align="center">Type</th><th align="center">Description and notes</th></tr></thead><tbody><tr><td align="center"><code>TextureCoordinates</code></td><td align="center">0</td><td align="center">32</td><td align="center"><code>array</code></td><td align="center">Diffuse texture UVs (array of <code>float</code> values, see below)</td></tr><tr><td align="center"><code>Texture</code></td><td align="center">32</td><td align="center">2</td><td align="center"><code>short</code></td><td align="center">ID of the diffuse texture to apply to this surface (<code>-1</code> means &quot;none&quot;)</td></tr><tr><td align="center"><code>LightmapSlice</code></td><td align="center">36</td><td align="center">2</td><td align="center"><code>ushort</code></td><td align="center">ID of the lightmap (and ambient occlusion) slice to apply to the surface</td></tr><tr><td align="center"><code>VertexColor</code></td><td align="center">40</td><td align="center">16</td><td align="center"><code>array</code></td><td align="center">BGRA-ordered color (<code>byte</code> values) of the surface&#x27;s bottom left vertex</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mojV" id="texture-coordinates">Texture Coordinates<a class="hash-link" href="#texture-coordinates" title="Direct link to heading">‚Äã</a></h4><p>Texture coordinates are stored in the following order:</p><ol><li><code>bottomLeftU</code></li><li><code>bottomRightU</code></li><li><code>topLeftU</code></li><li><code>topRightU</code></li><li><code>bottomLeftV</code></li><li><code>bottomRightV</code></li><li><code>topLeftV</code></li><li><code>topRightV</code></li></ol><p>The direction is always relative to the cube that the surface belongs to, i.e., <code>bottomLeft</code> is south-west and <code>topRight</code> is north-east.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="cube-grid-1">Cube Grid<a class="hash-link" href="#cube-grid-1" title="Direct link to heading">‚Äã</a></h4><table><thead><tr><th align="center">Field</th><th align="center">Offset</th><th align="center">Length</th><th align="center">Type</th><th align="center">Description</th></tr></thead><tbody><tr><td align="center"><code>BottomLeftHeight</code></td><td align="center">0</td><td align="center">4</td><td align="center"><code>float</code></td><td align="center">Altitude of the bottom left corner (in world units)</td></tr><tr><td align="center"><code>BottomRightHeight</code></td><td align="center">4</td><td align="center">4</td><td align="center"><code>float</code></td><td align="center">Altitude of the bottom right corner (in world units)</td></tr><tr><td align="center"><code>TopLeftHeight</code></td><td align="center">8</td><td align="center">4</td><td align="center"><code>float</code></td><td align="center">Altitude of the top left corner (in world units)</td></tr><tr><td align="center"><code>TopRightHeight</code></td><td align="center">12</td><td align="center">4</td><td align="center"><code>float</code></td><td align="center">Altitude of the top right corner (in world units)</td></tr><tr><td align="center"><code>UpwardsFacingSurface</code></td><td align="center">16</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Upwards-facing surface ID</td></tr><tr><td align="center"><code>NorthernWallSurface</code></td><td align="center">20</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Surface ID of the northwards-facing wall</td></tr><tr><td align="center"><code>EasternWallSurface</code></td><td align="center">24</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Surface ID of the eastwards-facing wall</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="version-18">Version 1.8<a class="hash-link" href="#version-18" title="Direct link to heading">‚Äã</a></h3><p>The water plane configuration that was previously part of the <a href="/file-formats/rsw/">RSW</a> file has been moved to the GND file instead.</p><p>All the information stored in version 1.7 is still present (and unchanged), plus the water plane configuration (appended).</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="water-plane-configuration">Water Plane Configuration<a class="hash-link" href="#water-plane-configuration" title="Direct link to heading">‚Äã</a></h4><p>In theory, this GND version supports multiple water planes. But in practice, all maps that use it only feature a single one.</p><table><thead><tr><th align="center">Field</th><th align="center">Offset</th><th align="center">Length</th><th align="center">Type</th><th align="center">Description</th></tr></thead><tbody><tr><td align="center"><code>WaterLevel</code></td><td align="center">0</td><td align="center">4</td><td align="center"><code>float</code></td><td align="center">Height of the default water plane (there&#x27;s always at least one)</td></tr><tr><td align="center"><code>WaterType</code></td><td align="center">4</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">Texture ID that&#x27;s applied to the water plane (tiled)</td></tr><tr><td align="center"><code>WaveHeight</code></td><td align="center">8</td><td align="center">4</td><td align="center"><code>float</code></td><td align="center">Amplitude of the water plane&#x27;s animation curve</td></tr><tr><td align="center"><code>WaveSpeed</code></td><td align="center">12</td><td align="center">4</td><td align="center"><code>float</code></td><td align="center">Phase of the water plane&#x27;s animation curve</td></tr><tr><td align="center"><code>WavePitch</code></td><td align="center">16</td><td align="center">4</td><td align="center"><code>float</code></td><td align="center">Surface curvature in degrees (origin of the curve)</td></tr><tr><td align="center"><code>TextureCyclingInterval</code></td><td align="center">20</td><td align="center">4</td><td align="center"><code>int</code></td><td align="center">After how many frames the next texture should be swapped in</td></tr></tbody></table><p>This is the basic water configuration, as present in both RSW (pre-2.6) and the next GND version.</p><p>The configuration for the other planes follows after the above, and is (in this version) always of the following form:</p><ol><li><code>NumWaterPlanesU</code> (<code>int</code> value): How many water planes there are in the horizontal dimension (always <code>1</code>)</li><li><code>NumWaterPlanesV</code> (<code>int</code> value): How many water planes there are in the vertical dimension (always <code>1</code>)</li><li>A <code>float</code> defining the <code>WaterLevel</code> (altitude) of this plane. It&#x27;s always identical to the water level above, since there&#x27;s only one.</li></ol><p>If there were multiple values here, it would likely be the <code>WateLlevel</code> of each plane (assuming the presence of <code>u * v</code> planes), but since that doesn&#x27;t happen (and there&#x27;s already a new GND version available) it seems unlikely that this would ever be used.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="version-19">Version 1.9<a class="hash-link" href="#version-19" title="Direct link to heading">‚Äã</a></h3><p>All the information stored in version 1.7, plus the water plane configuration (appended). The latter consists of the same information as is present in 1.8, but the format for defining multiple water planes has changed (and they are in fact used in some of the episode 19 maps I&#x27;ve seen, such as <code>icecastle.gnd</code>):</p><ol><li><code>NumWaterPlanesU</code> (<code>int</code> value): How many water planes there are in the horizontal dimension (NOT always <code>1</code>)</li><li><code>NumWaterPlanesV</code> (<code>int</code> value): How many water planes there are in the vertical dimension (NOT always <code>1</code>)</li><li>The same structure as defined for the original water plane (see table above), repeated <code>u * v</code> times</li></ol><p>I&#x27;m not quite sure what the original configuration is still used for, but I&#x27;m guessing it would serve as a fallback in case the numbers <code>(u, v)</code> are both zero (i.e., there aren&#x27;t any water planes defined in this section). More research is needed.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="references">References<a class="hash-link" href="#references" title="Direct link to heading">‚Äã</a></h2><ul><li><a href="/rendering/ground-mesh/">Rendering/Ground Mesh</a> details the interpretation of the ground mesh&#x27;s geometry (and related features)</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/RagnarokResearchLab/ragnarokresearchlab.github.io/edit/main/docs/file-formats/GND.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/file-formats/gat/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">GAT Format Specification</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/file-formats/gr2/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">GR2 Format Specification</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#contents" class="table-of-contents__link toc-highlight">Contents</a></li><li><a href="#layout" class="table-of-contents__link toc-highlight">Layout</a><ul><li><a href="#arcturus--iro-alpha" class="table-of-contents__link toc-highlight">Arcturus &amp; iRO Alpha</a></li><li><a href="#version-15" class="table-of-contents__link toc-highlight">Version 1.5</a></li><li><a href="#version-16" class="table-of-contents__link toc-highlight">Version 1.6</a></li><li><a href="#version-17" class="table-of-contents__link toc-highlight">Version 1.7</a></li><li><a href="#version-18" class="table-of-contents__link toc-highlight">Version 1.8</a></li><li><a href="#version-19" class="table-of-contents__link toc-highlight">Version 1.9</a></li></ul></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/about/">About</a></li><li class="footer__item"><a class="footer__link-item" href="/file-formats/">File Formats</a></li><li class="footer__item"><a class="footer__link-item" href="/rendering/">Rendering</a></li><li class="footer__item"><a class="footer__link-item" href="/game-mechanics/">Game Mechanics</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/contributing/">Contributing</a></li><li class="footer__item"><a href="https://discord.gg/7RFdMNrySy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/RagnarokResearchLab" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/community-projects/">Related Projects</a></li></ul></div><div class="col footer__col"><div class="footer__title">Tools</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/tools/#euc-kr-path-conversion">EUC-KR Path Conversion</a></li><li class="footer__item"><a class="footer__link-item" href="/tools/#raglite-developer-toolkit">RagLite Developer Toolkit</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2023 Ragnarok Research Lab (authors and contributors).<br>All trademarks referenced herein are the properties of their respective owners.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.4ac04102.js"></script>
<script src="/assets/js/main.92fc20c7.js"></script>
</body>
</html>