"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[542],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return u}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),m=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=m(e.components);return n.createElement(d.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,d=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=m(a),u=r,k=c["".concat(d,".").concat(u)]||c[u]||s[u]||i;return a?n.createElement(k,l(l({ref:t},p),{},{components:a})):n.createElement(k,l({ref:t},p))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=c;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var m=2;m<i;m++)l[m]=a[m];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},990:function(e,t,a){a.r(t),a.d(t,{assets:function(){return p},contentTitle:function(){return d},default:function(){return u},frontMatter:function(){return o},metadata:function(){return m},toc:function(){return s}});var n=a(7462),r=a(3366),i=(a(7294),a(3905)),l=["components"],o={sidebar_position:30,slug:"/rendering/camera-controls",title:"Camera Controls"},d=void 0,m={unversionedId:"rendering/camera-controls",id:"rendering/camera-controls",title:"Camera Controls",description:"This document describes the camera controller used by the Ragnarok Online client.",source:"@site/docs/rendering/camera-controls.md",sourceDirName:"rendering",slug:"/rendering/camera-controls",permalink:"/rendering/camera-controls",editUrl:"https://github.com/RagnarokResearchLab/ragnarokresearchlab.github.io/edit/main/docs/rendering/camera-controls.md",tags:[],version:"current",sidebarPosition:30,frontMatter:{sidebar_position:30,slug:"/rendering/camera-controls",title:"Camera Controls"},sidebar:"tutorialSidebar",previous:{title:"Ground Mesh",permalink:"/rendering/ground-mesh"},next:{title:"Overview",permalink:"/game-mechanics"}},p={},s=[{value:"Orbital Camera",id:"orbital-camera",level:2},{value:"Perspective Projection",id:"perspective-projection",level:2},{value:"Fixed Viewpoints",id:"fixed-viewpoints",level:2},{value:"Data Tables",id:"data-tables",level:3},{value:"Viewpoint Table Layout",id:"viewpoint-table-layout",level:3}],c={toc:s};function u(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This document describes the camera controller used by the Ragnarok Online client."),(0,i.kt)("h2",{id:"orbital-camera"},"Orbital Camera"),(0,i.kt)("p",null,"The game uses a flexible but fairly standard camera system, known under many different names, to create a third-person POV:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The distance from the camera target is given as a radius (in world units)"),(0,i.kt)("li",{parentName:"ul"},"Players can adjust the camera on two angles, horizontally and vertically"),(0,i.kt)("li",{parentName:"ul"},"In RO, only half of the horizontal range can be explored (for technical and probably stylistic reasons)")),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://doc.babylonjs.com/features/featuresDeepDive/cameras/camera_introduction#arc-rotate-camera"},"Here's")," and example explaining how it works; this is not engine-specific but rather a general method of rendering a 3D scene."),(0,i.kt)("h2",{id:"perspective-projection"},"Perspective Projection"),(0,i.kt)("p",null,"The camera settings control how exactly the scene is projected on the viewport window, giving the game its unique look:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The vertical field of view was claimed to be 15 degrees ","[by curiosity]",", which is a bit of a... curiosity (hah)"),(0,i.kt)("li",{parentName:"ul"},"The near plane is located at a distance of 10 (2 if normalized) world units - the size of one GND surface"),(0,i.kt)("li",{parentName:"ul"},"... and the far plane seems to be at a distance of 1500 (300 if normalized) world units, just outside the fog sphere")),(0,i.kt)("p",null,"It's important to point out the unusually narrow ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Field_of_view"},"field of view")," as it directly impacts how fog effects color the scene."),(0,i.kt)("h2",{id:"fixed-viewpoints"},"Fixed Viewpoints"),(0,i.kt)("p",null,"Certain maps lock in the camera settings, limiting the player's ability to adjust them (without hacking the client, that is)."),(0,i.kt)("h3",{id:"data-tables"},"Data Tables"),(0,i.kt)("p",null,"There are two data files (CSV tables) that control the fixed viewpoint camera on a per-map basis."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"data/indoorRswTable.txt"),": Features a list of maps for which camera adjustments should be disabled"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"data/viewpointtable.txt"),": Compliments the above with fixed viewpoints for a selection of maps")),(0,i.kt)("p",null,"The format of the files is quite simple:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"If a map's ",(0,i.kt)("a",{parentName:"li",href:"/file-formats/rsw"},"RSW")," file is listed in the ",(0,i.kt)("inlineCode",{parentName:"li"},"indoorRswTable"),", orbital rotations will be disabled completely for the map"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"viewpointtable"),' defines what camera angles to allow for the given map (no entry means "use default values")'),(0,i.kt)("li",{parentName:"ul"},"Entries in the viewpoint table are separated by hashtags (",(0,i.kt)("inlineCode",{parentName:"li"},"#"),") and arbitrary amounts of whitespace characters")),(0,i.kt)("h3",{id:"viewpoint-table-layout"},"Viewpoint Table Layout"),(0,i.kt)("p",null,"Viewpoint presets are defined by the following fields:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Index"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Field"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Interpretation"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"0"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"mapID")),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:"center"},"The name of the map's RSW resource file (with extension)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"1"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"range")),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"int")),(0,i.kt)("td",{parentName:"tr",align:"center"},"Minimum radial distance from the camera to the player character (in world units)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"2"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"scope")),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"int")),(0,i.kt)("td",{parentName:"tr",align:"center"},"Maximum radial distance adjustment that is allowed on top of ",(0,i.kt)("inlineCode",{parentName:"td"},"range")," (in world units)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"3"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"range_IN")),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"int")),(0,i.kt)("td",{parentName:"tr",align:"center"},"Initial radial distance from the camera to the player character (in world units)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"4"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"rotationFrom")),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"int")),(0,i.kt)("td",{parentName:"tr",align:"center"},"Minimum longitude of the camera's ",(0,i.kt)("a",{parentName:"td",href:"https://en.wikipedia.org/wiki/Azimuth"},"azimuth")," angle (in degrees)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"5"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"rotationTo")),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"int")),(0,i.kt)("td",{parentName:"tr",align:"center"},"Maximum longitude of the camera's ",(0,i.kt)("a",{parentName:"td",href:"https://en.wikipedia.org/wiki/Azimuth"},"azimuth")," angle (in degrees)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"6"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"rotation_IN")),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"int")),(0,i.kt)("td",{parentName:"tr",align:"center"},"Initial longitude of the camera's ",(0,i.kt)("a",{parentName:"td",href:"https://en.wikipedia.org/wiki/Azimuth"},"azimuth")," angle (in degrees)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"7"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"altitudeFrom")),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"int")),(0,i.kt)("td",{parentName:"tr",align:"center"},"Minimum latitude of the camera's ",(0,i.kt)("a",{parentName:"td",href:"https://en.wikipedia.org/wiki/Spherical_coordinate_system"},"polar")," angle (in degrees)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"8"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"altitudeTo")),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"int")),(0,i.kt)("td",{parentName:"tr",align:"center"},"Maximum latitude of the camera's ",(0,i.kt)("a",{parentName:"td",href:"https://en.wikipedia.org/wiki/Spherical_coordinate_system"},"polar")," angle (in degrees)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"9"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"altitude_IN")),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"int")),(0,i.kt)("td",{parentName:"tr",align:"center"},"Initial latitude of the camera's ",(0,i.kt)("a",{parentName:"td",href:"https://en.wikipedia.org/wiki/Spherical_coordinate_system"},"polar")," angle (in degrees)")))),(0,i.kt)("p",null,"Here's an example entry for the viewpoint table:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-txt"},"ex_map02.rsw#   250#    250#    500#        0#      90#     45#     -40#        -65#        -65#\n")),(0,i.kt)("p",null,"If this map was to be loaded, the camera's range of movement would be limited such that:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"It starts zoomed out at the maximum radial distance of 500 (100 if normalized) world units"),(0,i.kt)("li",{parentName:"ul"},"You can't zoom further in than 250 (50 if normalized) world units from the player character"),(0,i.kt)("li",{parentName:"ul"},"You can't zoom further out than the maximum distance (500, or 100 if normalized)"),(0,i.kt)("li",{parentName:"ul"},"You ",(0,i.kt)("em",{parentName:"li"},"can")," zoom in and out freely between the two thresholds by scrolling the mouse wheel"),(0,i.kt)("li",{parentName:"ul"},"The horizontal (azimuth) angle can be adjusted freely from 0 to 90 degrees"),(0,i.kt)("li",{parentName:"ul"},"The vertical (polar) angle can be adjusted from ",(0,i.kt)("em",{parentName:"li"},"positive")," 40 to 65 degrees (remember that ",(0,i.kt)("a",{parentName:"li",href:"/rendering/coordinate-systems#world-coordinates"},"the game world is upside down"),")")),(0,i.kt)("p",null,"Upon loading the map, the client places the camera so that it orbits the player at ",(0,i.kt)("inlineCode",{parentName:"p"},"(45, 65)")," in spherical coordinates."))}u.isMDXComponent=!0}}]);