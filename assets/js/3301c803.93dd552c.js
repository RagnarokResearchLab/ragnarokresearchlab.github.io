"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2082],{5756:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>a,frontMatter:()=>r,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"file-formats/GAT","title":"GAT","description":"This document describes the GAT file format used in the Ragnarok Online client.","source":"@site/docs/file-formats/GAT.md","sourceDirName":"file-formats","slug":"/file-formats/gat","permalink":"/file-formats/gat","draft":false,"unlisted":false,"editUrl":"https://github.com/RagnarokResearchLab/ragnarokresearchlab.github.io/edit/main/docs/file-formats/GAT.md","tags":[],"version":"current","frontMatter":{"slug":"/file-formats/gat","title":"GAT"},"sidebar":"tutorialSidebar","previous":{"title":"EZV (Placeholder)","permalink":"/file-formats/ezv"},"next":{"title":"GND","permalink":"/file-formats/gnd"}}');var l=n(4848),s=n(8453);const r={slug:"/file-formats/gat",title:"GAT"},c=void 0,d={},h=[{value:"Contents",id:"contents",level:2},{value:"Layout",id:"layout",level:2},{value:"Version 1.2",id:"version-12",level:3},{value:"Tile Properties",id:"tile-properties",level:4},{value:"Terrain Types",id:"terrain-types",level:4},{value:"Version 1.3",id:"version-13",level:3},{value:"References",id:"references",level:2}];function o(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",section:"section",sup:"sup",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.p,{children:"This document describes the GAT file format used in the Ragnarok Online client."}),"\n",(0,l.jsx)(t.h2,{id:"contents",children:"Contents"}),"\n",(0,l.jsx)(t.p,{children:"GAT files contain the following information:"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"Altitude data, encoded as height vectors, for each tile of a map"}),"\n",(0,l.jsx)(t.li,{children:"Terrain type flags to identify the terrain on a given tile"}),"\n"]}),"\n",(0,l.jsxs)(t.p,{children:["The file contents can be interpreted as a 2-dimensional navigation map, similar to ",(0,l.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Navigation_mesh",children:"3D navigation meshes"})," in concept."]}),"\n",(0,l.jsx)(t.h2,{id:"layout",children:"Layout"}),"\n",(0,l.jsx)(t.h3,{id:"version-12",children:"Version 1.2"}),"\n",(0,l.jsxs)(t.p,{children:["The vast majority of maps in the RO client use this version, including those found in alpha clients (and even ",(0,l.jsx)(t.a,{href:"/arcturus",children:"Arcturus"}),")",(0,l.jsx)(t.sup,{children:(0,l.jsx)(t.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),"."]}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Field"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Offset"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Length"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Type"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Description"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"Header"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"0"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"4"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"string"})}),(0,l.jsxs)(t.td,{style:{textAlign:"center"},children:[(0,l.jsx)(t.code,{children:'"GRAT"'})," as an ASCII-encoded, fixed-size string"]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"MajorVersion"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"4"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"1"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"byte"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Versioning information"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"MinorVersion"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"5"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"1"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"byte"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Versioning information"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"Width"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"6"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"4"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"int"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"The horizontal size of the map, given in tiles"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"Height"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"10"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"4"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"int"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"The vertical size of the map, given in tiles"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"Tiles"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"14+"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"20"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"array"})}),(0,l.jsxs)(t.td,{style:{textAlign:"center"},children:["Contains the navigation properties for ",(0,l.jsx)(t.code,{children:"Width * Height"})," tiles"]})]})]})]}),"\n",(0,l.jsx)(t.h4,{id:"tile-properties",children:"Tile Properties"}),"\n",(0,l.jsxs)(t.p,{children:["Each entry in the ",(0,l.jsx)(t.code,{children:"Tiles"}),' array represents a surface block ("tile") of the given map\'s terrain, and is structured as follows:']}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Field"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Offset"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Length"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Type"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Description"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"SouthWestAltitude"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"0"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"4"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"float"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Altitude at the bottom left corner, i.e., at (0, 0) relative coordinates"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"SouthEastAltitude"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"4"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"4"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"float"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Altitude at the bottom right corner, i.e., at (1, 0) relative coordinates"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"NorthWestAltitude"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"8"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"4"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"float"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Altitude at the top left corner, i.e., at (0, 1) relative coordinates"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"NorthEastAltitude"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"12"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"4"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"float"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Altitude at the top right corner, i.e., at (1, 1) relative coordinates"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"TerrainType"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"16"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"4"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"uint"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Identifier for the tile's terrain type"})]})]})]}),"\n",(0,l.jsx)(t.h4,{id:"terrain-types",children:"Terrain Types"}),"\n",(0,l.jsx)(t.admonition,{type:"info",children:(0,l.jsx)(t.p,{children:"More research is needed. If you know anything about the topic, please help fill in the blanks!"})}),"\n",(0,l.jsx)(t.p,{children:"The following terrain types are known to have practical applications:"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Value"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Walkable"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Interpretation"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"0"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"YES"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Regular (walkable) terrain"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"1"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"NO"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Obstructed (impassable) terrain"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"5"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"NO"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:'Impassable snipeable terrain ("cliff")'})]})]})]}),"\n",(0,l.jsxs)(t.p,{children:["There are ",(0,l.jsx)(t.a,{href:"https://openkore.com/wiki/Field_file_format",children:"several other terrain types"}),", but it's unclear whether they affect clientside collision checks at all."]}),"\n",(0,l.jsx)(t.h3,{id:"version-13",children:"Version 1.3"}),"\n",(0,l.jsx)(t.admonition,{type:"info",children:(0,l.jsx)(t.p,{children:"More research is needed. If you know anything about the topic, please help fill in the blanks!"})}),"\n",(0,l.jsxs)(t.p,{children:["This version adds a twist to the ",(0,l.jsx)(t.code,{children:"TerrainType"})," values: A special flag marks water tiles, though the layout itself hasn't changed. Effectively, two flags are seemingly embedded in the existing terrain type field. Consider the following example:"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["A water tile might use a ",(0,l.jsx)(t.code,{children:"TerrainType"})," of ",(0,l.jsx)(t.code,{children:"1"})," (obstructed), which in GAT 1.2 would be encoded as ",(0,l.jsx)(t.code,{children:"0x01000000"})," (LE ",(0,l.jsx)(t.code,{children:"int"}),", value is ",(0,l.jsx)(t.code,{children:"1"}),")"]}),"\n",(0,l.jsxs)(t.li,{children:["In GAT 1.3, the same",(0,l.jsx)(t.code,{children:"TerrainType"})," property would however be encoded as ",(0,l.jsx)(t.code,{children:"0x01000080"})," (LE ",(0,l.jsx)(t.code,{children:"int"}),", value is now ",(0,l.jsx)(t.code,{children:"-2147483647"}),")"]}),"\n",(0,l.jsxs)(t.li,{children:["The ",(0,l.jsx)(t.code,{children:"IsWaterTile"})," flag can then be extracted by masking the ",(0,l.jsx)(t.code,{children:"TerrainType"}),", leaving only the ",(0,l.jsx)(t.code,{children:"0x08"})," component (binary: ",(0,l.jsx)(t.code,{children:"0000 1000"}),")"]}),"\n"]}),"\n",(0,l.jsx)(t.p,{children:"What exactly should be done with that information is unclear, but all water tiles in GAT 1.3 files have been assigned such a flag."}),"\n",(0,l.jsx)(t.h2,{id:"references",children:"References"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.a,{href:"/rendering/coordinate-systems",children:"Rendering/Coordinate Systems"}),' describes the GAT-based coordinate system ("map coordinates")']}),"\n"]}),"\n","\n",(0,l.jsxs)(t.section,{"data-footnotes":!0,className:"footnotes",children:[(0,l.jsx)(t.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsxs)(t.li,{id:"user-content-fn-1",children:["\n",(0,l.jsxs)(t.p,{children:["Technically, old versions have a zero-byte prefix shifting the layout. It's still GAT 1.2 otherwise. ",(0,l.jsx)(t.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function a(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>c});var i=n(6540);const l={},s=i.createContext(l);function r(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);